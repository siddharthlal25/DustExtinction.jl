<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Color Laws Â· DustExtinction.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.svg" alt="DustExtinction.jl logo"/></a><h1>DustExtinction.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Color Laws</a><ul class="internal"><li><a class="toctext" href="#Usage-1">Usage</a></li><li><a class="toctext" href="#Advanced-Usage-1">Advanced Usage</a></li><li><a class="toctext" href="#API/Reference-1">API/Reference</a></li></ul></li><li><a class="toctext" href="../dust_maps/">Dust Maps</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Color Laws</a></li></ul><a class="edit-page" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/master/docs/src/color_laws.md"><span class="fa">ï‚›</span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Color Laws</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="laws-1" href="#laws-1">Color laws</a></h1><p>The following empirical laws allow us to model the reddening of light as it travels to us. The law you use should depend on the type of data you have and the goal of its use. <a href="#DustExtinction.ccm89"><code>ccm89</code></a> is very common for use in removing extinction from stellar observations, but <a href="#DustExtinction.cal00"><code>cal00</code></a>, for instance, is suited for galaxies with massive stars. Look through the citations and documentation for each law to get a better idea of what sort of physics it targets. </p><h2><a class="nav-anchor" id="Usage-1" href="#Usage-1">Usage</a></h2><pre><code class="language-julia-repl">julia&gt; ccm89(4000., 3.1)
1.464555702942584
</code></pre><p>These laws can be applied across higher dimension arrays using the <code>.</code> operator</p><pre><code class="language-julia-repl">julia&gt; ccm89.([4000., 5000.], 3.1)
2-element Array{Float64,1}:
 1.464555702942584
 1.1222468788993019
</code></pre><p>these laws return magnitudes, which we can apply directly to flux by mulitplication with a base-2.5 logarithmic system (because astronomers are fun):</p><div>\[f = f \cdot 10 ^ {-0.4A_v\cdot mag}\]</div><p>To make this easier, we provide a convenient <a href="#DustExtinction.redden"><code>redden</code></a> function for applying these color laws to flux measurements.</p><pre><code class="language-julia-repl">julia&gt; wave = range(4000, 5000, length=4)
4000.0:333.3333333333333:5000.0

julia&gt; flux = 1e-8 .* wave .+ 1e-2
0.01004:3.3333333333333333e-6:0.01005

julia&gt; redden.(flux, wave, 0.3)
4-element Array{Float64,1}:
 0.006698646015454752
 0.006918253926353551
 0.007154659823737299
 0.007370491272731541
</code></pre><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>If you are concerned with memory and would like an in-place broadcasted version of <a href="#DustExtinction.redden"><code>redden</code></a> use it with <a href="https://docs.julialang.org/en/v1/base/collections/#Base.map!"><code>Base.map!</code></a></p><pre><code class="language-julia">map!((f,w)-&gt;redden(f, w, 0.3), flux, flux, wave)</code></pre></div></div><h2><a class="nav-anchor" id="Advanced-Usage-1" href="#Advanced-Usage-1">Advanced Usage</a></h2><p>The color laws also have built-in support for uncertainties using <a href="https://github.com/juliaphysics/measurements.jl">Measurements.jl</a>.</p><pre><code class="language-julia-repl">julia&gt; using Measurements

julia&gt; ccm89.([4000. Â± 10.5, 5000. Â± 10.2], 3.1)
2-element Array{Measurement{Float64},1}:
 1.4646 Â± 0.0033
 1.1222 Â± 0.003
</code></pre><p>and also support units via <a href="https://github.com/painterqubits/unitful.jl">Unitful.jl</a> and its subsidiaries. Notice how the output type is now <code>Unitful.Gain</code>.</p><pre><code class="language-julia-repl">julia&gt; using Unitful, UnitfulAstro

julia&gt; mags = ccm89.([4000u&quot;angstrom&quot;, 0.5u&quot;Î¼m&quot;], 3.1)
2-element Array{Gain{Unitful.LogInfo{:Magnitude,10,-2.5},:?,Float64},1}:
 1.4645557029425837 mag
 1.1222468788993019 mag
</code></pre><p>You can even combine the two above to get some really nice workflows exploiting all Julia has to offer! This example shows how you could redden some OIR observational data with uncertainties in the flux density.</p><pre><code class="language-julia-repl">julia&gt; using Measurements, Unitful, UnitfulAstro

julia&gt; wave = range(0.3, 1.0, length=5)u&quot;Î¼m&quot;
(0.3:0.175:1.0) Î¼m

julia&gt; err = randn(length(wave))
5-element Array{Float64,1}:
  0.2972879845354616
  0.3823959677906078
 -0.5976344767282311
 -0.01044524463737564
 -0.839026854388764

julia&gt; flux = @.(300 / ustrip(wave)^4 Â± err)*u&quot;Jy&quot;
5-element Array{Quantity{Measurement{Float64},ğŒ*ğ“^-2,Unitful.FreeUnits{(Jy,),ğŒ*ğ“^-2,nothing}},1}:
  37037.04 Â± 0.3 Jy
  5893.14 Â± 0.38 Jy
  1680.61 Â± -0.6 Jy
 647.598 Â± -0.01 Jy
   300.0 Â± -0.84 Jy

julia&gt; redden.(flux, wave, 0.3)
5-element Array{Quantity{Measurement{Float64},ğŒ*ğ“^-2,Unitful.FreeUnits{(Jy,),ğŒ*ğ“^-2,nothing}},1}:
    22410.8 Â± 0.18 Jy
    4229.74 Â± 0.27 Jy
    1337.12 Â± 0.48 Jy
 554.3349 Â± 0.0089 Jy
     268.31 Â± 0.75 Jy
</code></pre><h2><a class="nav-anchor" id="API/Reference-1" href="#API/Reference-1">API/Reference</a></h2><h3><a class="nav-anchor" id="Helper-Functions-1" href="#Helper-Functions-1">Helper Functions</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DustExtinction.redden" href="#DustExtinction.redden"><code>DustExtinction.redden</code></a> â€” <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">redden(f::Real, Î»::Real, Av; RV=3.1, law=ccm89)
redden(f::Quantity, Î»::Quantity, Av; RV=3.1, law=ccm89)</code></pre><p>Redden the value <code>f</code> by the value calculated via the given law and total  extinction value <code>Av</code>. By default we use <code>RV=3.1</code> which is the Milky Way  average selective attenuation. Note that Î» should be in Angstrom if it is not  a <code>Quantity</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/1bbccdb15b889dfb7665caf2be51a4d52eb855a5/src/DustExtinction.jl#L21-L29">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DustExtinction.deredden" href="#DustExtinction.deredden"><code>DustExtinction.deredden</code></a> â€” <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">deredden(f::Real, Î»::Real, Av; RV=3.1, law=ccm89)
deredden(f::Quantity, Î»::Quantity, Av; RV=3.1, law=ccm89)</code></pre><p>Deredden the value <code>f</code> by the value calculated via the given law and total  extinction value <code>Av</code>. By default we use <code>RV=3.1</code> which is the Milky Way  average selective attenuation. Note that Î» should be in Angstrom if it is not  a <code>Quantity</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/1bbccdb15b889dfb7665caf2be51a4d52eb855a5/src/DustExtinction.jl#L33-L41">source</a></section><h3><a class="nav-anchor" id="Parametric-Extinction-Laws-1" href="#Parametric-Extinction-Laws-1">Parametric Extinction Laws</a></h3><p>These laws are all parametrized by the selective extinction <code>RV</code>. Mathematically, this is the ratio of the total extinction by the reddening</p><div>\[R_V = \frac{A_V}{E(B-V)}\]</div><p>and is loosely associated with the size of the dust grains in the interstellar medium.</p><h4><a class="nav-anchor" id="Clayton,-Cardelli-and-Mathis-(1989)-1" href="#Clayton,-Cardelli-and-Mathis-(1989)-1">Clayton, Cardelli and Mathis (1989)</a></h4><div></div><img src="ccm89_plot.svg" style="max-width:80%; display: block; margin-left: auto; margin-right: auto"><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DustExtinction.ccm89" href="#DustExtinction.ccm89"><code>DustExtinction.ccm89</code></a> â€” <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">ccm89(Î»::Real,Â RV=3.1)
ccm89(Î»::Quantity,Â RV=3.1)</code></pre><p>Clayton,Â CardelliÂ andÂ MathisÂ (1989)Â dustÂ law.Â </p><p>ReturnsÂ E(B-V)Â inÂ magnitudesÂ atÂ theÂ givenÂ wavelengthÂ relativeÂ toÂ theÂ extinctionÂ  atÂ 5494.5Â Ã….Â <code>Î»</code>Â isÂ theÂ wavelengthÂ inÂ Ã…Â andÂ hasÂ supportÂ overÂ <code>[1000,Â 33333]</code>.Â  OutsideÂ ofÂ thatÂ rangeÂ thisÂ willÂ returnÂ 0.Â <code>RV</code>Â isÂ theÂ selectiveÂ extinctionÂ  andÂ isÂ validÂ overÂ <code>[2,Â 6]</code>.Â AÂ typicalÂ valueÂ forÂ theÂ MilkyÂ WayÂ isÂ 3.1</p><p>IfÂ <code>Î»</code>Â isÂ aÂ <code>Unitful.Quantity</code>Â itÂ willÂ beÂ automaticallyÂ convertedÂ toÂ Ã…Â andÂ theÂ  returnedÂ valueÂ willÂ beÂ <code>UnitfulAstro.mag</code>.</p><p>#Â References <a href="http://ui.adsabs.harvard.edu/abs/1989ApJ...345..245C">[1]</a> Clayton,Cardelli and Mathis (1989)</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/1bbccdb15b889dfb7665caf2be51a4d52eb855a5/src/color_laws.jl#L18-L34">source</a></section><h4><a class="nav-anchor" id="O&#39;Donnell-1994-1" href="#O&#39;Donnell-1994-1">O&#39;Donnell 1994</a></h4><div></div><img src="od94_plot.svg" style="max-width:80%; display: block; margin-left: auto; margin-right: auto"><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DustExtinction.od94" href="#DustExtinction.od94"><code>DustExtinction.od94</code></a> â€” <span class="docstring-category">Function</span>.</div><div><div><p>Â Â Â Â od94(Î»::Real,Â RV=3.1) Â Â Â Â od94(Î»::Quantity,Â RV=3.1)</p><p>O&#39;DonnellÂ (1994)Â dustÂ law.</p><p>ThisÂ isÂ identicalÂ toÂ theÂ Clayton,Â CardelliÂ andÂ MathisÂ (1989)Â dustÂ law,Â exceptÂ  forÂ differentÂ coefficientsÂ usedÂ inÂ theÂ opticalÂ (3030.3Â Ã…Â toÂ 9090.9Â Ã…).</p><p>IfÂ <code>Î»</code>Â isÂ aÂ <code>Unitful.Quantity</code>Â itÂ willÂ beÂ automaticallyÂ convertedÂ toÂ Ã…Â andÂ  theÂ returnedÂ valueÂ willÂ beÂ <code>UnitfulAstro.mag</code>.</p><p>#Â References <a href="http://ui.adsabs.harvard.edu/abs/1994ApJ...422..158O">[1]</a>Â O&#39;DonnellÂ (1994)</p><p>#Â SeeÂ Also <a href="#DustExtinction.ccm89"><code>ccm89</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/1bbccdb15b889dfb7665caf2be51a4d52eb855a5/src/color_laws.jl#L42-L59">source</a></section><h4><a class="nav-anchor" id="Calzetti-et-al.-(2000)-1" href="#Calzetti-et-al.-(2000)-1">Calzetti et al. (2000)</a></h4><div></div><img src="cal00_plot.svg" style="max-width:80%; display: block; margin-left: auto; margin-right: auto"><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DustExtinction.cal00" href="#DustExtinction.cal00"><code>DustExtinction.cal00</code></a> â€” <span class="docstring-category">Function</span>.</div><div><div><p>Â Â Â Â cal00(Î»::Real,Â RV=4.05) Â Â Â Â cal00(Î»::Quantity,Â RV=4.05)</p><p>CalzettiÂ etÂ al.Â (2000)Â DustÂ Law.</p><p>ReturnsÂ E(B-V)Â inÂ magnitudesÂ atÂ theÂ givenÂ wavelength.Â <code>Î»</code>Â isÂ theÂ wavelengthÂ inÂ Ã… Â andÂ hasÂ supportÂ overÂ <code>[1200,Â 22000]</code>.Â OutsideÂ ofÂ thatÂ rangeÂ thisÂ willÂ returnÂ 0.Â </p><p>CalzettiÂ etÂ al.Â (2000)Â developedÂ aÂ recipeÂ forÂ dereddeningÂ theÂ spectraÂ ofÂ  galaxiesÂ whereÂ massiveÂ starsÂ dominateÂ theÂ radiationÂ output.Â TheyÂ foundÂ theÂ best Â fitÂ valueÂ forÂ suchÂ galaxiesÂ wasÂ 4.05Â±0.80.</p><p>IfÂ <code>Î»</code>Â isÂ aÂ <code>Unitful.Quantity</code>Â itÂ willÂ beÂ automaticallyÂ convertedÂ toÂ Ã…Â andÂ theÂ  returnedÂ valueÂ willÂ beÂ <code>UnitfulAstro.mag</code>.</p><p>#Â References <a href="http://ui.adsabs.harvard.edu/abs/2000ApJ...533..682C">[1]</a>Â CalzettiÂ etÂ al.Â (2000)</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/1bbccdb15b889dfb7665caf2be51a4d52eb855a5/src/color_laws.jl#L101-L119">source</a></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../dust_maps/"><span class="direction">Next</span><span class="title">Dust Maps</span></a></footer></article></body></html>
